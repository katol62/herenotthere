(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{i5pG:function(t,e,s){"use strict";s.r(e),s.d(e,"EditPageModule",(function(){return f}));var r=s("ofXK"),i=s("3Pt+"),o=s("TEn/"),n=s("tyNb"),a=s("fXoL");let b=(()=>{class t{constructor(){}static compare(t){return e=>{if(e.parent){const s=e.parent;if(s){const r=s.get(t);if(e.value!==r.value)return{invalidConfirmPassword:!0}}}return null}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=a.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var c=s("9nlD"),u=s("477c"),m=s("IYfF"),d=s("mbak");const l=[{path:"",component:(()=>{class t{constructor(t,e,s,r,i,o){this.authService=t,this.formBuilder=e,this.activatedRoute=s,this.router=r,this.notificationService=i,this.restService=o,this.errorHandling=(t,e)=>this.form.controls[t].hasError(e)}ngOnInit(){this.authSubscriber=this.authService.authInfo.subscribe(t=>{this.authInfo=t}),this.form=this.formBuilder.group({id:[null],first_name:["",i.j.compose([i.j.required])],last_name:["",i.j.compose([i.j.required])],phone:[""],role:[""],email:["",i.j.compose([i.j.required,i.j.email])],newPassword:[""],confirmPassword:[""]});const t=this.activatedRoute.snapshot.paramMap.get("id");this.validId=t&&t!==u.e,this.validId?(this.id=Number(t),this.getAdmin(this.id),this.form.get("newPassword").setErrors(null),this.form.get("confirmPassword").setErrors(null),this.form.get("newPassword").setValidators(null),this.form.get("confirmPassword").setValidators(null)):(this.form.get("newPassword").setValidators([i.j.required,i.j.minLength(3)]),this.form.get("confirmPassword").setValidators([i.j.required,i.j.minLength(3),b.compare("newPassword")])),this.form.get("newPassword").valueChanges.subscribe(t=>{this.id&&(""!==this.form.get("newPassword").value?(this.form.get("newPassword").setValidators([i.j.required,i.j.minLength(3)]),this.form.get("confirmPassword").setValidators([i.j.required,i.j.minLength(3),b.compare("newPassword")])):(this.form.get("newPassword").setErrors(null),this.form.get("confirmPassword").setErrors(null),this.form.get("newPassword").setValidators(null),this.form.get("confirmPassword").setValidators(null)))})}ngOnDestroy(){this.authSubscriber.unsubscribe(),this.authSubscriber=null}getAdmin(t){this.restService.get("users/"+t.toString()).subscribe({next:t=>{const e=Object.assign(Object.assign({},t.data),{newPassword:""});this.form.patchValue(e)}})}save(t){const e={data:Object.assign(Object.assign({},t),{password:t.newPassword})};t.id?this.restService.put("users/"+String(t.id),e).subscribe({next:t=>{this.notificationService.show({message:t.message,type:c.a.success})}}):this.restService.post("users/create",e).subscribe({next:t=>{this.notificationService.show({message:t.message,type:c.a.success})}})}onSubmit(){this.form.invalid||(this.form.touched?this.save(this.form.value):this.notificationService.show({message:"Nothing changed",type:c.a.warning}))}back(){this.router.navigate([u.f])}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(m.a),a.Hb(i.a),a.Hb(n.a),a.Hb(n.g),a.Hb(c.b),a.Hb(d.a))},t.\u0275cmp=a.Bb({type:t,selectors:[["app-edit"]],decls:37,vars:3,consts:[["slot","start"],["text","","defaultHref","users"],[3,"formGroup","ngSubmit"],["type","text","formControlName","first_name"],["type","text","formControlName","last_name"],["type","text","formControlName","email"],["type","text","formControlName","phone"],["type","password","formControlName","newPassword"],["type","password","formControlName","confirmPassword"],["color","primary","type","submit",3,"disabled"]],template:function(t,e){1&t&&(a.Kb(0,"ion-header"),a.Kb(1,"ion-toolbar"),a.Kb(2,"ion-buttons",0),a.Ib(3,"ion-back-button",1),a.Jb(),a.Kb(4,"ion-title"),a.ec(5),a.Jb(),a.Jb(),a.Jb(),a.Kb(6,"ion-content"),a.Kb(7,"ion-card"),a.Kb(8,"ion-card-content"),a.Kb(9,"form",2),a.Sb("ngSubmit",(function(){return e.onSubmit()})),a.Kb(10,"ion-item"),a.Kb(11,"ion-label"),a.ec(12,"First Name"),a.Jb(),a.Ib(13,"ion-input",3),a.Jb(),a.Kb(14,"ion-item"),a.Kb(15,"ion-label"),a.ec(16,"Last Name"),a.Jb(),a.Ib(17,"ion-input",4),a.Jb(),a.Kb(18,"ion-item"),a.Kb(19,"ion-label"),a.ec(20,"Email"),a.Jb(),a.Ib(21,"ion-input",5),a.Jb(),a.Kb(22,"ion-item"),a.Kb(23,"ion-label"),a.ec(24,"Phone"),a.Jb(),a.Ib(25,"ion-input",6),a.Jb(),a.Kb(26,"ion-item"),a.Kb(27,"ion-label"),a.ec(28,"Password"),a.Jb(),a.Ib(29,"ion-input",7),a.Jb(),a.Kb(30,"ion-item"),a.Kb(31,"ion-label"),a.ec(32,"Confirm Password"),a.Jb(),a.Ib(33,"ion-input",8),a.Jb(),a.Kb(34,"ion-item"),a.Kb(35,"ion-button",9),a.ec(36,"Submit"),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Jb()),2&t&&(a.xb(5),a.gc("User",e.validId?" : edit":" : create",""),a.xb(4),a.Xb("formGroup",e.form),a.xb(26),a.Xb("disabled",!e.form.valid))},directives:[o.l,o.t,o.f,o.c,o.d,o.s,o.i,o.g,o.h,i.k,i.h,i.c,o.o,o.p,o.n,o.A,i.g,i.b,o.e],styles:[""]}),t})()}];let h=(()=>{class t{}return t.\u0275mod=a.Fb({type:t}),t.\u0275inj=a.Eb({factory:function(e){return new(e||t)},imports:[[n.i.forChild(l)],n.i]}),t})(),f=(()=>{class t{}return t.\u0275mod=a.Fb({type:t}),t.\u0275inj=a.Eb({factory:function(e){return new(e||t)},imports:[[r.b,i.d,o.u,h,i.i]]}),t})()}}]);