!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{i5pG:function(t,n,r){"use strict";r.r(n),r.d(n,"EditPageModule",(function(){return P}));var o,s,a,u,c=r("ofXK"),b=r("3Pt+"),f=r("TEn/"),l=r("tyNb"),m=r("fXoL"),d=((o=function(){function t(){e(this,t)}return i(t,null,[{key:"compare",value:function(e){return function(t){if(t.parent){var i=t.parent;if(i){var n=i.get(e);if(t.value!==n.value)return{invalidConfirmPassword:!0}}}return null}}}]),t}()).\u0275fac=function(e){return new(e||o)},o.\u0275prov=m.Db({token:o,factory:o.\u0275fac,providedIn:"root"}),o),h=r("9nlD"),p=r("477c"),w=r("IYfF"),g=r("mbak"),v=[{path:"",component:(s=function(){function t(i,n,r,o,s,a){var u=this;e(this,t),this.authService=i,this.formBuilder=n,this.activatedRoute=r,this.router=o,this.notificationService=s,this.restService=a,this.errorHandling=function(e,t){return u.form.controls[e].hasError(t)}}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.authSubscriber=this.authService.authInfo.subscribe((function(t){e.authInfo=t})),this.form=this.formBuilder.group({id:[null],first_name:["",b.j.compose([b.j.required])],last_name:["",b.j.compose([b.j.required])],phone:[""],role:[""],email:["",b.j.compose([b.j.required,b.j.email])],newPassword:[""],confirmPassword:[""]});var t=this.activatedRoute.snapshot.paramMap.get("id");this.validId=t&&t!==p.e,this.validId?(this.id=Number(t),this.getAdmin(this.id),this.form.get("newPassword").setErrors(null),this.form.get("confirmPassword").setErrors(null),this.form.get("newPassword").setValidators(null),this.form.get("confirmPassword").setValidators(null)):(this.form.get("newPassword").setValidators([b.j.required,b.j.minLength(3)]),this.form.get("confirmPassword").setValidators([b.j.required,b.j.minLength(3),d.compare("newPassword")])),this.form.get("newPassword").valueChanges.subscribe((function(t){e.id&&(""!==e.form.get("newPassword").value?(e.form.get("newPassword").setValidators([b.j.required,b.j.minLength(3)]),e.form.get("confirmPassword").setValidators([b.j.required,b.j.minLength(3),d.compare("newPassword")])):(e.form.get("newPassword").setErrors(null),e.form.get("confirmPassword").setErrors(null),e.form.get("newPassword").setValidators(null),e.form.get("confirmPassword").setValidators(null)))}))}},{key:"ngOnDestroy",value:function(){this.authSubscriber.unsubscribe(),this.authSubscriber=null}},{key:"getAdmin",value:function(e){var t=this;this.restService.get("users/"+e.toString()).subscribe({next:function(e){var i=Object.assign(Object.assign({},e.data),{newPassword:""});t.form.patchValue(i)}})}},{key:"save",value:function(e){var t=this,i={data:Object.assign(Object.assign({},e),{password:e.newPassword})};e.id?this.restService.put("users/"+String(e.id),i).subscribe({next:function(e){t.notificationService.show({message:e.message,type:h.a.success})}}):this.restService.post("users/create",i).subscribe({next:function(e){t.notificationService.show({message:e.message,type:h.a.success})}})}},{key:"onSubmit",value:function(){this.form.invalid||(this.form.touched?this.save(this.form.value):this.notificationService.show({message:"Nothing changed",type:h.a.warning}))}},{key:"back",value:function(){this.router.navigate([p.f])}}]),t}(),s.\u0275fac=function(e){return new(e||s)(m.Hb(w.a),m.Hb(b.a),m.Hb(l.a),m.Hb(l.g),m.Hb(h.b),m.Hb(g.a))},s.\u0275cmp=m.Bb({type:s,selectors:[["app-edit"]],decls:37,vars:3,consts:[["slot","start"],["text","","defaultHref","users"],[3,"formGroup","ngSubmit"],["type","text","formControlName","first_name"],["type","text","formControlName","last_name"],["type","text","formControlName","email"],["type","text","formControlName","phone"],["type","password","formControlName","newPassword"],["type","password","formControlName","confirmPassword"],["color","primary","type","submit",3,"disabled"]],template:function(e,t){1&e&&(m.Kb(0,"ion-header"),m.Kb(1,"ion-toolbar"),m.Kb(2,"ion-buttons",0),m.Ib(3,"ion-back-button",1),m.Jb(),m.Kb(4,"ion-title"),m.ec(5),m.Jb(),m.Jb(),m.Jb(),m.Kb(6,"ion-content"),m.Kb(7,"ion-card"),m.Kb(8,"ion-card-content"),m.Kb(9,"form",2),m.Sb("ngSubmit",(function(){return t.onSubmit()})),m.Kb(10,"ion-item"),m.Kb(11,"ion-label"),m.ec(12,"First Name"),m.Jb(),m.Ib(13,"ion-input",3),m.Jb(),m.Kb(14,"ion-item"),m.Kb(15,"ion-label"),m.ec(16,"Last Name"),m.Jb(),m.Ib(17,"ion-input",4),m.Jb(),m.Kb(18,"ion-item"),m.Kb(19,"ion-label"),m.ec(20,"Email"),m.Jb(),m.Ib(21,"ion-input",5),m.Jb(),m.Kb(22,"ion-item"),m.Kb(23,"ion-label"),m.ec(24,"Phone"),m.Jb(),m.Ib(25,"ion-input",6),m.Jb(),m.Kb(26,"ion-item"),m.Kb(27,"ion-label"),m.ec(28,"Password"),m.Jb(),m.Ib(29,"ion-input",7),m.Jb(),m.Kb(30,"ion-item"),m.Kb(31,"ion-label"),m.ec(32,"Confirm Password"),m.Jb(),m.Ib(33,"ion-input",8),m.Jb(),m.Kb(34,"ion-item"),m.Kb(35,"ion-button",9),m.ec(36,"Submit"),m.Jb(),m.Jb(),m.Jb(),m.Jb(),m.Jb(),m.Jb()),2&e&&(m.xb(5),m.gc("User",t.validId?" : edit":" : create",""),m.xb(4),m.Xb("formGroup",t.form),m.xb(26),m.Xb("disabled",!t.form.valid))},directives:[f.l,f.t,f.f,f.c,f.d,f.s,f.i,f.g,f.h,b.k,b.h,b.c,f.o,f.p,f.n,f.A,b.g,b.b,f.e],styles:[""]}),s)}],y=((u=function t(){e(this,t)}).\u0275mod=m.Fb({type:u}),u.\u0275inj=m.Eb({factory:function(e){return new(e||u)},imports:[[l.i.forChild(v)],l.i]}),u),P=((a=function t(){e(this,t)}).\u0275mod=m.Fb({type:a}),a.\u0275inj=m.Eb({factory:function(e){return new(e||a)},imports:[[c.b,b.d,f.u,y,b.i]]}),a)}}])}();